<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3EJIEHOTPAA - Мини-игры</title>
    <style>
        :root {
            --primary: #ff5722;
            --secondary: #2196f3;
            --dark: #121212;
            --darker: #000000;
            --light: #e0e0e0;
            --lighter: #ffffff;
            --gray: #333333;
            --correct: #4CAF50;
            --incorrect: #f44336;
            --warning: #ff9800;
            --adult: #e91e63;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: var(--dark);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }
        
        .logo-placeholder {
            width: 100%;
            height: 100px;
            background-color: var(--gray);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            border-radius: 10px;
            color: var(--lighter);
            font-size: 24px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        h1, h2, h3 {
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .game-mode {
            background-color: var(--gray);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .game-mode:hover {
            transform: scale(1.02);
        }
        
        .game-mode h3 {
            margin-bottom: 10px;
        }
        
        .game-mode p {
            color: var(--light);
            margin-bottom: 10px;
        }
        
        .game-mode.adult {
            background-color: var(--adult);
        }
        
        .game-mode.adult h3::after {
            content: " 18+";
            font-size: 0.8em;
            vertical-align: super;
        }
        
        .btn {
            background-color: var(--primary);
            color: var(--lighter);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            display: block;
            width: 100%;
            margin: 10px 0;
            transition: background-color 0.2s;
        }
        
        .btn:hover {
            background-color: #e64a19;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
        }
        
        .btn-secondary:hover {
            background-color: #1976d2;
        }
        
        .btn-correct {
            background-color: var(--correct);
        }
        
        .btn-incorrect {
            background-color: var(--incorrect);
        }
        
        .btn-warning {
            background-color: var(--warning);
        }
        
        .btn-adult {
            background-color: var(--adult);
        }
        
        .hidden {
            display: none;
        }
        
        .game-screen {
            background-color: var(--gray);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .timer {
            font-size: 36px;
            text-align: center;
            margin: 20px 0;
            color: var(--primary);
        }
        
        .score-display {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .team {
            text-align: center;
            padding: 10px;
            background-color: var(--dark);
            border-radius: 5px;
            width: 45%;
            margin: 5px;
        }
        
        .team-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--secondary);
        }
        
        .team-score {
            font-size: 24px;
        }
        
        .score-btn {
            padding: 5px 10px;
            margin: 5px;
            border-radius: 3px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        
        .add-points {
            display: flex;
            justify-content: center;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .setup-form {
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: var(--light);
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background-color: var(--dark);
            color: var(--light);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .team-inputs {
            margin-top: 15px;
        }
        
        .back-btn {
            background-color: var(--gray);
            color: var(--light);
        }
        
        .back-btn:hover {
            background-color: #444;
        }
        
        .answer-btn {
            margin-top: 15px;
            background-color: var(--secondary);
        }
        
        .answer-display {
            margin-top: 15px;
            padding: 10px;
            background-color: var(--dark);
            border-radius: 5px;
            text-align: center;
            display: none;
        }
        
        .settings-section {
            background-color: var(--gray);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .settings-section h3 {
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .adult-warning {
            display: none;
            background-color: var(--darker);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid var(--adult);
        }
        
        .adult-warning p {
            margin-bottom: 15px;
        }
        
        @media (max-width: 480px) {
            .logo-placeholder {
                height: 80px;
                font-size: 20px;
            }
            
            .timer {
                font-size: 28px;
            }
            
            .team-score {
                font-size: 20px;
            }
            
            .team {
                width: 100%;
            }
            
            .score-btn {
                padding: 8px 5px;
                font-size: 12px;
                margin: 3px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-placeholder">ЛОГОТИП</div>
        
        <!-- Главное меню -->
        <div id="main-menu">
            <h1>3EJIEHOTPAA</h1>
            <h2>Выберите режим игры</h2>
            
            <div class="game-mode" onclick="showGameSetup('alias')">
                <h3>Алиас</h3>
                <p>Объясняйте слова своей команде, не называя их</p>
            </div>
            
            <div class="game-mode" onclick="showGameSetup('crocodile')">
                <h3>Крокодил</h3>
                <p>Показывайте слова без слов, только жестами</p>
            </div>
            
            <div class="game-mode" onclick="showGameSetup('drawing')">
                <h3>Рисовалка</h3>
                <p>Рисуйте слова, чтобы ваша команда угадала</p>
            </div>
            
            <div class="game-mode" onclick="showGameSetup('quiz')">
                <h3>Викторина</h3>
                <p>Отвечайте на вопросы быстрее соперников</p>
            </div>
            
            <div class="game-mode adult" onclick="showAdultWarning('alias18')">
                <h3>Алиас 18+</h3>
                <p>Взрослая версия игры с откровенными словами</p>
            </div>
            
            <div class="game-mode adult" onclick="showAdultWarning('crocodile18')">
                <h3>Крокодил 18+</h3>
                <p>Откровенные жесты и движения</p>
            </div>
        </div>
        
        <!-- Предупреждение для взрослых -->
        <div id="adult-warning" class="adult-warning hidden">
            <h3>Внимание! Контент 18+</h3>
            <p>Этот режим игры содержит откровенные и взрослые слова.</p>
            <p>Пожалуйста, подтвердите, что все участники старше 18 лет.</p>
            <button class="btn btn-adult" id="confirm-adult">Я подтверждаю, что мне 18+</button>
            <button class="btn back-btn" onclick="hideAdultWarning()">Назад</button>
        </div>
        
        <!-- Настройка игры -->
        <div id="game-setup" class="hidden">
            <h2 id="setup-title">Настройка игры</h2>
            
            <div class="setup-form">
                <div class="settings-section">
                    <h3>Основные настройки</h3>
                    <div class="form-group">
                        <label for="round-time">Время на раунд (секунды):</label>
                        <input type="number" id="round-time" value="60" min="10" max="300">
                    </div>
                    
                    <div class="form-group">
                        <label for="team-count">Количество команд:</label>
                        <select id="team-count">
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Настройки очков</h3>
                    <div class="form-group">
                        <label for="points-correct">Очков за правильный ответ:</label>
                        <input type="number" id="points-correct" value="1" min="1" max="10">
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="penalty-skip" checked>
                        <label for="penalty-skip">Штраф за пропуск слова (-1 очко)</label>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="allow-negative" checked>
                        <label for="allow-negative">Разрешить отрицательные очки</label>
                    </div>
                </div>
                
                <div class="team-inputs" id="team-inputs">
                    <!-- Здесь будут поля для названий команд -->
                </div>
                
                <button class="btn" onclick="startGame()">Начать игру</button>
                <button class="btn back-btn" onclick="backToMenu()">Назад в меню</button>
            </div>
        </div>
        
        <!-- Игровой экран -->
        <div id="game-screen" class="hidden">
            <h2 id="game-title">Игра</h2>
            
            <div class="timer" id="timer">60</div>
            
            <div class="score-display" id="score-display">
                <!-- Здесь будут отображаться счета команд -->
            </div>
            
            <div class="game-screen">
                <h3 id="current-word">Слово</h3>
                <p id="game-instruction">Инструкция к игре</p>
                
                <!-- Блок для отображения ответа (только для викторины) -->
                <div id="answer-section" class="hidden">
                    <button class="btn answer-btn" id="show-answer-btn" onclick="showAnswer()">Показать ответ</button>
                    <div class="answer-display" id="answer-display">
                        <strong>Правильный ответ:</strong> <span id="correct-answer"></span>
                    </div>
                </div>
            </div>
            
            <div class="add-points" id="add-points">
                <!-- Здесь будут кнопки для добавления очков -->
            </div>
            
            <button class="btn" id="next-word-btn" onclick="nextWord()">Следующее слово</button>
            <button class="btn btn-warning" id="skip-word-btn" onclick="skipWord()">Пропустить слово (-1)</button>
            <button class="btn back-btn" onclick="endGame()">Завершить игру</button>
        </div>
    </div>
    
    <script>
        // Данные для игр
        const gameData = {
            alias: {
                title: "Алиас",
                instruction: "Объясните слово своей команде, не называя его.",
                words: [
                    "Абракадабра", "Беспредел", "Вихревой", "Гротеск", "Диссонанс", "Еретик", "Жонглер", "Затмение", "Иероглиф", "Йогурт",
                    "Калейдоскоп", "Лабиринт", "Метаморфоза", "Небосвод", "Оазис", "Папарацци", "Рапсодия", "Сюрреализм", "Трансформация", "Утопия",
                    "Фантасмагория", "Харизма", "Церемония", "Чудовище", "Шаман", "Щепетильный", "Экстравагантный", "Юродивый", "Ягуар", "Амплитуда",
                    "Бифуркация", "Вернисаж", "Галактика", "Дефиле", "Живописец", "Зодиак", "Импресарио", "Коллаж", "Либретто", "Метаморфоза",
                    "Ностальгия", "Орнамент", "Палитра", "Рефлексия", "Симфония", "Трилогия", "Уникум", "Феерия", "Хроника", "Циклон",
                    "Чакра", "Шедевр", "Щеголь", "Экспромт", "Эпицентр", "Ювелир", "Яхонт", "Аккордеон", "Барокко", "Водопад",
                    "Гармония", "Дендрарий", "Жонглирование", "Зефир", "Имитация", "Катарсис", "Лавина", "Мельпомена", "Нирвана", "Обскура",
                    "Пантомима", "Радуга", "Серенада", "Танцовщица", "Уникум", "Фаворит", "Хамелеон", "Циркуль", "Чародей", "Штрих",
                    "Экватор", "Юрта", "Янтарь", "Аллегория", "Бестселлер", "Вернисаж", "Гарпия", "Денди", "Жасмин", "Зодиак",
                    "Импровизация", "Калейдоскоп", "Логотип", "Метаморфоза", "Нектар", "Оригами", "Пастораль", "Реверберация", "Сфинкс", "Терминал"
                ]
            },
            crocodile: {
                title: "Крокодил",
                instruction: "Покажите слово без слов, только жестами.",
                words: [
                    "Акробат", "Балерина", "Волшебник", "Гимнаст", "Дрессировщик", "Жонглер", "Заклинатель", "Иллюзионист", "Йог", "Ковбой",
                    "Лыжник", "Моряк", "Ниндзя", "Охотник", "Пират", "Рыбак", "Строитель", "Танцор", "Учёный", "Фехтовальщик",
                    "Художник", "Циркач", "Чародей", "Шахтёр", "Щит", "Электрик", "Ювелир", "Яхтсмен", "Астронавт", "Боксёр",
                    "Водитель", "Гольфист", "Дровосек", "Жокей", "Закройщик", "Индеец", "Космонавт", "Лётчик", "Модель", "Нефтяник",
                    "Официант", "Пожарный", "Радист", "Сантехник", "Ткач", "Уборщик", "Фотограф", "Хирург", "Цветочник", "Часовщик",
                    "Шериф", "Щипач", "Эколог", "Юрист", "Ярмарка", "Актёр", "Бармен", "Ветеринар", "Горничная", "Диджей",
                    "Егерь", "Журналист", "Зоолог", "Император", "Кинолог", "Лесник", "Массажист", "Няня", "Орнитолог", "Парикмахер",
                    "Режиссёр", "Стилист", "Таксист", "Учитель", "Фермер", "Хоккеист", "Цветовод", "Чертежник", "Шофёр", "Щегол",
                    "Экскурсовод", "Юнга", "Ясновидящий", "Археолог", "Библиотекарь", "Водолаз", "Геолог", "Дворник", "Епископ", "Жестянщик",
                    "Звукорежиссёр", "Исследователь", "Каскадёр", "Лаборант", "Металлург", "Нефролог", "Океанолог", "Пекарь", "Радиоведущий", "Сварщик"
                ]
            },
            drawing: {
                title: "Рисовалка",
                instruction: "Нарисуйте слово, чтобы ваша команда угадала.",
                words: [
                    "Айсберг", "Бумеранг", "Водопад", "Гейзер", "Дельфин", "Единорог", "Жираф", "Замок", "Индюк", "Йети",
                    "Кентавр", "Лабиринт", "Мельница", "Небоскрёб", "Осьминог", "Пирамида", "Робот", "Сфинкс", "Троллейбус", "Улитка",
                    "Феникс", "Хижина", "Цирк", "Чудовище", "Шаттл", "Щука", "Экскаватор", "Юла", "Якорь", "Аэроплан",
                    "Бегемот", "Верблюд", "Глобус", "Динозавр", "Жук-носорог", "Замок", "Иглу", "Колизей", "Луноход", "Метеорит",
                    "НЛО", "Орган", "Павлин", "Радуга", "Самовар", "Телескоп", "Утконос", "Фонтан", "Храм", "Цербер",
                    "Чайник", "Штурвал", "Щит", "Эйфелева башня", "Юрта", "Яхта", "Акваланг", "Броненосец", "Ветряк", "Гончарный круг",
                    "Дракон", "Железная дорога", "Зонт", "Икар", "Каракатица", "Ледокол", "Мост", "Нарвал", "Омар", "Панда",
                    "Ракета", "Снеговик", "Танк", "Удав", "Факел", "Хамелеон", "Цветок", "Черепаха", "Шар", "Щенок",
                    "Электричка", "Юркий", "Ящерица", "Аэростат", "Беседка", "Вулкан", "Гриб", "Дождь", "Жар-птица", "Замок с привидениями",
                    "Ипподром", "Коралловый риф", "Лампа", "Маяк", "Небо", "Океан", "Паром", "Роза", "Солнце", "Туча"
                ]
            },
            quiz: {
                title: "Викторина",
                instruction: "Ответьте на вопрос быстрее соперников.",
                questions: [
                    {q: "Какой химический элемент обозначается как 'Hg'?", a: "Ртуть"},
                    {q: "Как называется наука о насекомых?", a: "Энтомология"},
                    {q: "Какой композитор написал 'Лунную сонату'?", a: "Бетховен"},
                    {q: "Как называется самая маленькая птица в мире?", a: "Колибри"},
                    {q: "Какой город называют 'Северной Венецией'?", a: "Санкт-Петербург"},
                    {q: "Как называется самая длинная кость в человеческом теле?", a: "Бедренная"},
                    {q: "Какой художник написал 'Крик'?", a: "Мунк"},
                    {q: "Как называется процесс превращения гусеницы в бабочку?", a: "Метаморфоз"},
                    {q: "Какой океан самый глубокий?", a: "Тихий"},
                    {q: "Как называется самая высокая гора Африки?", a: "Килиманджаро"},
                    {q: "Какой газ самый легкий?", a: "Водород"},
                    {q: "Как называется самая большая пустыня в мире?", a: "Сахара"},
                    {q: "Какой писатель создал Шерлока Холмса?", a: "Конан Дойл"},
                    {q: "Как называется самая длинная река в Азии?", a: "Янцзы"},
                    {q: "Какой музыкальный инструмент имеет 88 клавиш?", a: "Фортепиано"},
                    {q: "Как называется наука о грибах?", a: "Микология"},
                    {q: "Какой художник отрезал себе ухо?", a: "Ван Гог"},
                    {q: "Как называется самая большая луна Юпитера?", a: "Ганимед"},
                    {q: "Какой химический элемент самый тяжелый?", a: "Оганесон"},
                    {q: "Как называется самая высокая гора в Альпах?", a: "Монблан"},
                    {q: "Какой композитор был глухим в конце жизни?", a: "Бетховен"},
                    {q: "Как называется самая большая змея в мире?", a: "Анаконда"},
                    {q: "Какой художник написал 'Чёрный квадрат'?", a: "Малевич"},
                    {q: "Как называется самая большая планета Солнечной системы?", a: "Юпитер"},
                    {q: "Какой химический элемент назван в честь России?", a: "Рутений"}
                ]
            },
            alias18: {
                title: "Алиас 18+",
                instruction: "Объясните слово своей команде, не называя его.",
                words: [
                    "Страпон", "Фетиш", "БДСМ", "Оргазм", "Эрекция", "Куннилингус", "Фелляция", "Секс-игрушка", "Сперма", "Вагина",
                    "Пенис", "Грудь", "Ягодицы", "Эякуляция", "Мастурбация", "Порно", "Стриптиз", "Секс-шоп", "Вибратор", "Лубрикант",
                    "Свингер", "Ганг-бэнг", "Петтинг", "Трахнуть", "Кончить", "Возбуждение", "Фантазия", "Ролевые игры", "Доминация", "Садо-мазо",
                    "Секс втроём", "Оральный секс", "Анальный секс", "Грубый секс", "Нежность", "Постель", "Ню", "Эротика", "Порнография", "Обнажёнка",
                    "Секс-символ", "Соблазнение", "Флирт", "Сексуальность", "Либидо", "Потенция", "Интим", "Любовник", "Любовница", "Измена",
                    "Ревность", "Роман", "Свидание", "Секс по телефону", "Вечеринка для взрослых", "Нудизм", "Стриптизёр", "Стриптизёрша", "Эскорт", "Проститутка",
                    "Бордель", "Секс-тур", "Свингер-клуб", "Ночной клуб", "Алкоголь", "Афродизиак", "Виагра", "Контрацепция", "Презерватив", "Противозачаточные",
                    "Беременность", "Аборт", "Менструация", "Климакс", "Импотенция", "Фригидность", "Гомосексуализм", "Лесбиянка", "Гей", "Бисексуал",
                    "Трансгендер", "Травести", "Камасутра", "Поза", "Миссионерская", "Догги-стайл", "Наездница", "69", "Обратная наездница", "Стоя",
                    "Лицом к лицу", "Сзади", "Сверху", "Снизу", "На боку", "На коленях", "На стуле", "В душе", "В машине", "На природе"
                ]
            },
            crocodile18: {
                title: "Крокодил 18+",
                instruction: "Покажите слово без слов, только жестами.",
                words: [
                    "Секс", "Поцелуй", "Объятия", "Ласки", "Поглаживания", "Щипки", "Укусы", "Шлепки", "Доминирование", "Подчинение",
                    "Связывание", "Маски", "Кляп", "Плеть", "Наручники", "Ошейник", "Поводок", "Кошки-мышки", "Дразнить", "Соблазнять",
                    "Раздеваться", "Оголяться", "Дрожать", "Стонать", "Кричать", "Шептать", "Дышать", "Целоваться", "Облизывать", "Сосать",
                    "Лизать", "Кусать", "Тереться", "Давить", "Толкать", "Тянуть", "Вращать", "Вилять", "Трясти", "Прыгать",
                    "Сгибаться", "Выгибаться", "Напрягаться", "Расслабляться", "Кончать", "Брызгать", "Капать", "Течь", "Влажность", "Сухость",
                    "Грубость", "Нежность", "Скорость", "Медленность", "Глубина", "Поверхностность", "Сила", "Слабость", "Контроль", "Потеря контроля",
                    "Оргазм", "Дрожь", "Взрыв", "Волна", "Прилив", "Отлив", "Напряжение", "Разрядка", "Удовольствие", "Боль",
                    "Удовлетворение", "Разочарование", "Усталость", "Бодрость", "Сонливость", "Возбуждённость", "Спокойствие", "Беспокойство", "Стыд", "Раскрепощённость",
                    "Скромность", "Разврат", "Невинность", "Опыт", "Робость", "Смелость", "Зажатость", "Раскованность", "Сдержанность", "Безудержность"
                ]
            }
        };
        
        let currentGame = null;
        let currentTeams = [];
        let currentScores = [];
        let timerInterval = null;
        let timeLeft = 0;
        let currentWordIndex = 0;
        let currentTeamIndex = 0;
        let gameSettings = {
            pointsCorrect: 1,
            penaltySkip: true,
            allowNegative: true
        };
        let pendingAdultMode = null;
        
        // Показать предупреждение для взрослых
        function showAdultWarning(gameMode) {
            pendingAdultMode = gameMode;
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('adult-warning').classList.remove('hidden');
            document.getElementById('confirm-adult').onclick = confirmAdult;
        }
        
        // Подтверждение взрослого режима
        function confirmAdult() {
            hideAdultWarning();
            showGameSetup(pendingAdultMode);
        }
        
        // Скрыть предупреждение для взрослых
        function hideAdultWarning() {
            document.getElementById('adult-warning').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
            pendingAdultMode = null;
        }
        
        // Показать настройку игры
        function showGameSetup(gameMode) {
            currentGame = gameMode;
            document.getElementById('setup-title').textContent = `Настройка: ${gameData[gameMode].title}`;
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('game-setup').classList.remove('hidden');
            
            // Обновляем поля для команд
            updateTeamInputs();
            
            // При изменении количества команд
            document.getElementById('team-count').addEventListener('change', updateTeamInputs);
        }
        
        // Обновить поля для названий команд
        function updateTeamInputs() {
            const teamCount = parseInt(document.getElementById('team-count').value);
            const teamInputs = document.getElementById('team-inputs');
            
            teamInputs.innerHTML = '';
            
            for (let i = 0; i < teamCount; i++) {
                const div = document.createElement('div');
                div.className = 'form-group';
                
                const label = document.createElement('label');
                label.textContent = `Название команды ${i+1}:`;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.required = true;
                input.value = `Команда ${i+1}`;
                input.id = `team-${i}`;
                
                div.appendChild(label);
                div.appendChild(input);
                teamInputs.appendChild(div);
            }
        }
        
        // Начать игру
        function startGame() {
            const roundTime = parseInt(document.getElementById('round-time').value);
            const teamCount = parseInt(document.getElementById('team-count').value);
            
            // Получаем настройки очков
            gameSettings.pointsCorrect = parseInt(document.getElementById('points-correct').value) || 1;
            gameSettings.penaltySkip = document.getElementById('penalty-skip').checked;
            gameSettings.allowNegative = document.getElementById('allow-negative').checked;
            
            // Получаем названия команд
            currentTeams = [];
            currentScores = [];
            for (let i = 0; i < teamCount; i++) {
                const teamName = document.getElementById(`team-${i}`).value || `Команда ${i+1}`;
                currentTeams.push(teamName);
                currentScores.push(0);
            }
            
            // Настраиваем игровой экран
            document.getElementById('game-title').textContent = gameData[currentGame].title;
            document.getElementById('game-instruction').textContent = gameData[currentGame].instruction;
            
            // Обновляем текст кнопки пропуска с учетом штрафа
            document.getElementById('skip-word-btn').textContent = gameSettings.penaltySkip ? 
                `Пропустить слово (-${gameSettings.pointsCorrect})` : "Пропустить слово";
            
            // Показываем/скрываем секцию с ответами в зависимости от режима
            if (currentGame === 'quiz') {
                document.getElementById('answer-section').classList.remove('hidden');
                document.getElementById('answer-display').style.display = 'none';
            } else {
                document.getElementById('answer-section').classList.add('hidden');
            }
            
            // Обновляем отображение счетов
            updateScoreDisplay();
            
            // Начинаем первый раунд
            startRound(roundTime);
            
            // Переключаемся на игровой экран
            document.getElementById('game-setup').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
        }
        
        // Начать раунд
        function startRound(time) {
            timeLeft = time;
            document.getElementById('timer').textContent = timeLeft;
            
            // Запускаем таймер
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endRound();
                }
            }, 1000);
            
            // Показываем текущее слово/вопрос
            showCurrentWord();
            
            // Обновляем кнопки для добавления очков
            updatePointButtons();
        }
        
        // Показать текущее слово/вопрос
        function showCurrentWord() {
            if (currentGame === 'quiz') {
                const questions = gameData.quiz.questions;
                if (currentWordIndex < questions.length) {
                    document.getElementById('current-word').textContent = questions[currentWordIndex].q;
                    // Скрываем ответ при переходе к новому вопросу
                    document.getElementById('answer-display').style.display = 'none';
                    document.getElementById('show-answer-btn').textContent = 'Показать ответ';
                } else {
                    document.getElementById('current-word').textContent = "Вопросы закончились!";
                }
            } else {
                const words = gameData[currentGame].words;
                if (currentWordIndex < words.length) {
                    document.getElementById('current-word').textContent = words[currentWordIndex];
                } else {
                    document.getElementById('current-word').textContent = "Слова закончились!";
                }
            }
        }
        
        // Показать ответ (для викторины)
        function showAnswer() {
            const answerDisplay = document.getElementById('answer-display');
            const showAnswerBtn = document.getElementById('show-answer-btn');
            
            if (answerDisplay.style.display === 'none' || !answerDisplay.style.display) {
                const questions = gameData.quiz.questions;
                if (currentWordIndex < questions.length) {
                    document.getElementById('correct-answer').textContent = questions[currentWordIndex].a;
                    answerDisplay.style.display = 'block';
                    showAnswerBtn.textContent = 'Скрыть ответ';
                }
            } else {
                answerDisplay.style.display = 'none';
                showAnswerBtn.textContent = 'Показать ответ';
            }
        }
        
        // Обновить кнопки для добавления очков
        function updatePointButtons() {
            const addPointsDiv = document.getElementById('add-points');
            addPointsDiv.innerHTML = '';
            
            for (let i = 0; i < currentTeams.length; i++) {
                const btn = document.createElement('button');
                btn.className = 'score-btn';
                btn.style.backgroundColor = i === currentTeamIndex ? 'var(--correct)' : 'var(--incorrect)';
                btn.textContent = currentTeams[i];
                btn.onclick = () => addPoints(i);
                
                addPointsDiv.appendChild(btn);
            }
        }
        
        // Добавить очки команде
        function addPoints(teamIndex) {
            currentScores[teamIndex] += gameSettings.pointsCorrect;
            updateScoreDisplay();
            nextWord();
        }
        
        // Обновить отображение счетов
        function updateScoreDisplay() {
            const scoreDisplay = document.getElementById('score-display');
            scoreDisplay.innerHTML = '';
            
            for (let i = 0; i < currentTeams.length; i++) {
                const teamDiv = document.createElement('div');
                teamDiv.className = 'team';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'team-name';
                nameDiv.textContent = currentTeams[i];
                
                const scoreDiv = document.createElement('div');
                scoreDiv.className = 'team-score';
                scoreDiv.textContent = currentScores[i];
                
                // Подсвечиваем текущую команду
                if (i === currentTeamIndex) {
                    teamDiv.style.border = "2px solid var(--secondary)";
                }
                
                teamDiv.appendChild(nameDiv);
                teamDiv.appendChild(scoreDiv);
                scoreDisplay.appendChild(teamDiv);
            }
        }
        
        // Следующее слово
        function nextWord() {
            currentWordIndex++;
            
            if (currentGame === 'quiz' && currentWordIndex >= gameData.quiz.questions.length) {
                endRound();
                return;
            }
            
            if (currentGame !== 'quiz' && currentWordIndex >= gameData[currentGame].words.length) {
                endRound();
                return;
            }
            
            showCurrentWord();
        }
        
        // Пропустить слово
        function skipWord() {
            if (gameSettings.penaltySkip) {
                // Проверяем, разрешены ли отрицательные очки
                if (gameSettings.allowNegative || currentScores[currentTeamIndex] > 0) {
                    currentScores[currentTeamIndex] -= gameSettings.pointsCorrect;
                    updateScoreDisplay();
                }
            }
            nextWord();
        }
        
        // Завершить раунд
        function endRound() {
            clearInterval(timerInterval);
            
            // Переключаем команду
            currentTeamIndex = (currentTeamIndex + 1) % currentTeams.length;
            
            // Сбрасываем индекс слова для следующего раунда
            currentWordIndex = 0;
            
            // Показываем результаты
            alert(`Раунд завершен! Следующая команда: ${currentTeams[currentTeamIndex]}`);
            
            // Начинаем новый раунд
            const roundTime = parseInt(document.getElementById('round-time').value);
            startRound(roundTime);
        }
        
        // Завершить игру
        function endGame() {
            clearInterval(timerInterval);
            
            // Показываем финальные результаты
            let results = "Игра завершена!\n\nРезультаты:\n";
            for (let i = 0; i < currentTeams.length; i++) {
                results += `${currentTeams[i]}: ${currentScores[i]} очков\n`;
            }
            
            // Определяем победителя
            const maxScore = Math.max(...currentScores);
            const winners = currentTeams.filter((team, index) => currentScores[index] === maxScore);
            
            if (winners.length === 1) {
                results += `\nПобедитель: ${winners[0]}!`;
            } else if (winners.length > 1) {
                results += `\nНичья между: ${winners.join(', ')}!`;
            }
            
            alert(results);
            
            // Возвращаемся в главное меню
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
        }
        
        // Вернуться в меню
        function backToMenu() {
            document.getElementById('game-setup').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
        }
        
        // Инициализация полей для команд
        updateTeamInputs();
    </script>
</body>
</html>